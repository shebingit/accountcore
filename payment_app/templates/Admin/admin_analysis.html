{% extends 'Admin/adminbase.html' %}
{% load static %}
{% block body %}

<!--- Income & Expence Section -->
<div class="content-wrapper">
    <div class="row">
        <div class="col-sm-12">
            <div class="home-tab">

                <div class="tab-content tab-content-basic">
                  <div class="tab-pane fade show active" id="overview" role="tabpanel" aria-labelledby="overview"> 
                    <div class="row">
                        <div class="col-md-4 grid-margin stretch-card">
                        <a href="{% url 'admin_analysis_income_expence_details' %}">
                            <div class="card">
                            <div class="card-body">
                                <h4 class="card-title">Income & Expence </h4>
                                <div class="media">
                                <i class="mdi mdi-contrast icon-md text-info d-flex align-self-start me-3"></i>
                                <div class="media-body">
                                    <p class="card-text">Cras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque.</p>
                                </div>
                                </div>
                            </div>
                            </div>
                        </a>
                        </div>
                        <div class="col-md-4 grid-margin stretch-card">
                            <a href="{% url 'admin_analysis_OJT_details' %}">
                                <div class="card">
                                <div class="card-body">
                                    <h4 class="card-title">Onthe Job Training</h4>
                                    <div class="media">
                                    <i class="mdi mdi-cube-outline icon-md text-info d-flex align-self-center me-3"></i>
                                    <div class="media-body">
                                        <p class="card-text">Cras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque.</p>
                                    </div>
                                    </div>
                                </div>
                                </div>
                            </a>
                        </div>
                        <div class="col-md-4 grid-margin stretch-card">
                            <a href="{% url 'admin_analysis_employee_details' %}">
                                <div class="card">
                                <div class="card-body">
                                    <h4 class="card-title">Employees</h4>
                                    <div class="media">
                                    <i class="mdi mdi-account-multiple icon-md text-info d-flex align-self-end me-3"></i>
                                    <div class="media-body">
                                        <p class="card-text">Cras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque.</p>
                                    </div>
                                    </div>
                                </div>
                                </div>
                            </a>
                        </div>
                    </div>
                    
                    <div class="card p-4">
                        <div class="row ">
                            <div class="col-sm-12 col-lg-6 col-md-6">
                                <div class="row  ">
                                    <div class="col-sm-12">
                                        <div class="d-flex align-items-center justify-content-center">
                                            <h4 class="mt-3 mb-3">
                                                {% if prebala_value > 0 %}
                                                <span class="fw-bold text-success" id="previousMonth"></span><span class="text-sm text-success fw-bold"> ( Profit )</span>
                                                {% elif prebala_value < 0 %}
                                                <span class="fw-bold text-danger" id="previousMonth" ></span> <span class="text-sm text-danger fw-bold"> ( Loss )</span>
                                                {% else %}
                                                <span class="fw-bold text-warning" id="previousMonth" ></span> <span class="text-smtext-warning fw-bold"> ( Equal )</span>
                                                {% endif %}
                                                - Income & Expence  
                                            </h4>
                                        </div>
                                    </div>
                                    <div class="col-sm-12">
                                        <div class="statistics-details d-flex align-items-center justify-content-around mt-2">
                                
                                            <div >
                                                <p class="statistics-title">Prev. Income</p>
                                                <h3 class="rate-percentage">{{previosincome_total}}</h3>
                                                <p class="text-success d-flex"><i class="mdi mdi-menu-down"></i><span></span></p>
                                            </div>
                                            <div>
                                                <p class="statistics-title">Prev. Expence</p>
                                                <h3 class="rate-percentage">{{previosexp_total}}</h3>
                                                <p class="text-danger d-flex"><i class="mdi mdi-menu-down"></i><span></span></p>
                                            </div>
                                            <div>
                                                <p class="statistics-title">Prev. Balance</p>
                                                <h3 class="rate-percentage">{{prebala_value}}</h3>
                                                <p class="text-success d-flex"><i class="mdi mdi-menu-down"></i><span></span></p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                            </div>
                            <div class="col-sm-12 col-lg-6 col-md-6">
                                <div class="row">
                                    <div class="col-sm-12">
                                        <div class="d-flex align-items-center justify-content-center">
                                            <h4 class="mt-3 mb-3">
                                                {% if bala_value > 0 %}
                                                <span class="fw-bold text-success">{% now "F" %}<span class="text-sm"> ( Profit )</span></span>
                                                {% elif bala_value < 0 %}
                                                <span class="fw-bold text-danger">{% now "F" %}<span class="text-sm"> ( Loss )</span></span>
                                                {% else %}
                                                <span class="fw-bold text-warning">{% now "F" %}<span class="text-sm"> ( Equal )</span></span>
                                                {% endif %}
                                                - Income & Expence  
                                            </h4>
                                        </div>
                                        <div class="col-sm-12">
                                            <div class="statistics-details d-flex align-items-center justify-content-around mt-2">
                                                <div>
                                                    <p class="statistics-title">Curr. Income </p>
                                                    <h3 class="rate-percentage">{{income_total}}</h3>
                                                    {% if income_precentage > 0 %}
                                                    <p class="text-success d-flex"><i class="mdi mdi-menu-up"></i><span>{{income_precentage}}%</span></p>
                                                    {% else %}
                                                    <p class="text-danger d-flex"><i class="mdi mdi-menu-down"></i><span>{{income_precentage}}%</span></p>
                                                    {% endif %}
                                                </div>
                                                <div>
                                                    <p class="statistics-title">Curr. Expence</p>
                                                    <h3 class="rate-percentage">{{exp_total}}</h3>
                                                    {% if expence_precentage > 0 %}
                                                    <p class="text-danger d-flex"><i class="mdi mdi-menu-up"></i><span>{{expence_precentage}}</span></p>
                                                    {%else %}
                                                    <p class="text-success d-flex"><i class="mdi mdi-menu-down"></i><span>{{expence_precentage}}</span></p>
                                                    {% endif %}
                                                </div>
                                                <div>
                                                    <p class="statistics-title">Current Balance</p>
                                                    <h3 class="rate-percentage">{{bala_value}}</h3>
                                                    {% if income_precentage > 0 %}
                                                    <p class="text-success d-flex"><i class="mdi mdi-menu-up"></i><span>{{balance_precentage}}</span></p>
                                                    {% else %}
                                                    <p class="text-danger d-flex"><i class="mdi mdi-menu-down"></i><span>{{balance_precentage}}</span></p>
                                                    {% endif %}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>                                 
                            </div>
                            
                        </div> 
                    </div>
                  </div>
                </div>
            </div>
        </div>
    </div>

   
    <div class="row mt-3">
        <div class="col-lg-7 grid-margin ">
            <h6 class="card-title fw-bold text-center mb-2 ">{% now "F" %} - &nbsp; Income & Expence &nbsp;chart</h6>
            <div class="card mt-3">
              <div class="card-body">
                <canvas id="barChart"></canvas>
              </div>
            </div>
        </div>
        <div class="col-lg-5 grid-margin ">
            <h6 class="card-title fw-bold text-center mb-2"><span id="nextmonth"></span> -  Income & Expence</h6>
            <div class="row mt-3">
                <div class="col-md-12 col-sm-6 grid-margin stretch-card">
                  <a href="#">
                      <div class="card">
                      <div class="card-body">
                          <h4 class="card-title text-success">Income - &nbsp;{{next_month_income}} </h4>
                          <div class="media">
                          <i class="mdi mdi-arrow-up-thick icon-md text-info d-flex align-self-start me-3"></i>
                          <div class="media-body">
                              <p class="card-text">The above amount is calculated based on the Onthe Job Training (OJT) data of next month   </p>
                          </div>
                          </div>
                      </div>
                      </div>
                  </a>
                </div>
                <div class="col-md-12 grid-margin stretch-card">
                  <a href="#">
                      <div class="card">
                      <div class="card-body">
                          <h4 class="card-title text-danger">Expence - &nbsp; {{next_month_exp}}</h4>
                          <div class="media">
                          <i class="mdi mdi-arrow-down-thick icon-md text-info d-flex align-self-center me-3"></i>
                          <div class="media-body">
                              <p class="card-text">Here the above expence amount is calculated based on the fixed expence data</p>
                          </div>
                          </div>
                      </div>
                      </div>
                  </a>
                </div>
                <div class="col-md-12 grid-margin stretch-card">
                  <a href="#">
                      <div class="card">
                        <div class="card-body">
                            <h4 class="card-title">Balance - &nbsp; 
                                {% if next_month_income > next_month_exp %}
                                <span class="text-success span-data "><i class="mdi mdi-menu-up"></i> Profit</span> 
                                {% elif next_month_income < next_month_exp  %}
                                <span class="text-danger span-data"><i class="mdi mdi-menu-down"></i>Loss</span> 
                                {% else %}
                                <span class="text-success span-data"><i class="mdi mdi-menu-up"></i> No-Profit & No Loss</span>  
                                {% endif %}
                            </h4>
                            <div class="media">
                                <i class="mdi mdi-contrast  icon-md text-info d-flex align-self-end me-3"></i>
                                <div class="media-body">
                                    <p class="card-text">Here we comparing  both expence and income, based on the value showing the balance of next month</p>
                                </div>
                            </div>
                        </div>
                      </div>
                  </a>
                </div>
            </div>
        </div>
    </div>

    
</div>
   

<!-- End Income & Expence Section -->


<!-- Script for Previous Month -->

    <script>
    function getPreviousMonthName() {
      var currentDate = new Date();
      currentDate.setMonth(currentDate.getMonth() - 1);
      
      var monthNames = [
        "January", "February", "March", "April", "May", "June",
        "July", "August", "September", "October", "November", "December"
      ];
      
      var previousMonthName = monthNames[currentDate.getMonth()];
      
      return previousMonthName;
    }
    </script>
    <script>
        function getNextMonthName() {
          var currentDate = new Date();
          currentDate.setMonth(currentDate.getMonth() + 1);
          
          var monthNames = [
            "January", "February", "March", "April", "May", "June",
            "July", "August", "September", "October", "November", "December"
          ];
          
          var previousMonthName = monthNames[currentDate.getMonth()];
          
          return previousMonthName;
        }
    </script>

    <script>
        document.getElementById("previousMonth").textContent = getPreviousMonthName();
        document.getElementById("nextmonth").textContent = getNextMonthName();
       
    </script>

<!--- End Previous month pick-->



{% endblock %}





<main>
  

        <div class="internship">

            <h5>Onthe Job Training</h5>

            <div class="counts">
                <div class="card">
                    <i class="bi bi-people"></i>
                    <p>Registration</p>
                    <span class="count_no" style="font-size:0.94em;">{{content.reg}}</span>
                    
                </div>
                <div class="card">
                    <i class="bi bi-cash"></i>
                    <p>Total Cash</p>
                    <span style="font-size:0.92em;">{{content.reg_ojt_amt}} /-</span>
                </div>
                <div class="card">
                    <i class="bi bi-people"></i>
                    <p>Reg. {% now "F" %}</p>
                    <span class="count_no" style="font-size:0.94em;">{{content.reg_c}}</span>
                    
                </div>
                <div class="card">
                    <i class="bi bi-cash"></i>
                    <p>Total Cash</p>
                    <span style="font-size:0.92em;">{{content.reg_c_amt}} /-</span>
                </div>
                
                
            </div>

            
            <h6>O T J  &nbsp; On &nbsp;{% now "F" %} </h6>

            <div class="pre_counts" id="perdition">
                <div class="card">
                    <span>UnPaid <i class="bi bi-calendar-week"></i></span>
                    <p>1 To 7</p>
                    <span class="count_no">{{content.payhistory1_c}}</span>
                    <span>{{content.payhistory1}} /-</span>
                </div>
                
                <div class="card">
                    <span>UnPaid <i class="bi bi-calendar-week"></i></span>
                    <p> 8 To 15</p>
                    <span class="count_no">{{content.payhistory8_c}}</span>
                    <span>{{content.payhistory8}} /-</span>
                </div>
                
                <div class="card">
                    <span>UnPaid <i class="bi bi-calendar-week"></i></span>
                    <p> 15 To End</p>
                    <span class="count_no">{{content.payhistory15_c}}</span>
                    <span>{{content.payhistory15}} /-</span>
                </div>
                <div class="card">
                    <span>UnPaid <i class="bi bi-calendar-week"></i></span>
                    <p> {% now "F" %}</p>
                    <span class="count_no">{{content.reg_upaid_c}}</span>
                    <span>{{content.reg_upaid}} /-</span>
                </div>
                <div class="card">
                    <i class="bi bi-calendar3"></i>
                    <p>Next Month</p>
                    <span class="count_no">{{content.next_reg_upaid_c}}</span>
                    <span>{{content.next_reg_upaid}} /-</span>
                </div>
            </div>

            
            <h6>Payments</h6>
            <div class="counts">
                <div class="card">
                    <i class="bi bi-exclamation-circle-fill"></i>
                    <p>Pending</p>
                    <span class="count_no">{{content.reg_pending}}</span>
                    <span>{{content.reg_p_amt}} /-</span>
                </div>
                <div class="card">
                    <i class="bi bi-check-circle-fill"></i>
                    <p>Completed</p>
                    <span class="count_no">{{content.reg_complete}}</span>
                    <span>{{content.reg_c_amt}} /-</span>
                </div>
                <div class="card">
                    <i class="bi bi-x-circle-fill"></i>
                    <p>Incomplete</p>
                    <span class="count_no">{{content.reg_incomplete}}</span>
                    <span>{{content.reg_in_amt}} /-</span>
                </div>
            </div>

        </div>
        
        <div class="employee_reg">

            <h5>Employees</h5>

            <div class="counts">
                <div class="card">
                    <i class="bi bi-people"></i>
                    <p>Emp.Reg</p>
                    <span class="count_no" style="font-size:0.94em;">{{content.emp_reg}}</span>
                </div>
                <div class="card">
                    <i class="bi bi-cash"></i>
                    <p>Total Paid Salary</p>
                    <span>{{content.emp_reg_tsal}} /-</span>
                </div>
                
            </div>

            <h6>Payments On &nbsp;{% now "F" %}</h6>
            <div class="counts">
                <div class="card">
                    <i class="bi bi-check-circle-fill"></i>
                    <p>Confirmed Salary</p>
                    <span class="count_no">{{content.emp_con_sal}}</span>
                    <span>{{content.emp_con_sal_amt}} /-</span>
                </div>
               
                <div class="card">
                    <i class="bi bi-check-circle-fill"></i>
                    <p>Salary Paid</p>
                    <span class="count_no">{{content.emp_sal_count}}</span>
                    <span>{{content.emp_sal}} /-</span>
                </div>
                <div class="card">
                    <i class="bi bi-x-circle-fill"></i>
                    <p>Salary Unpaid</p>
                    <span class="count_no">{{content.emp_unpaid}}</span>
                    <span>{{content.emp_unp_amt}} /-</span>
                </div>
            </div>

            <h6>Salary Payments On  &nbsp;{% now "F" %}</h6>
            <div class="emp_sal_section" id="#">
               
               
                <div class="card">
                    <i class="bi bi-calendar-week"></i>
                    <p>1 To 14</p>
                    <span class="count_no">{{content.empsalc_1to7}}</span>
                    <span>{{content.empsal_1to7}} /-</span>
                </div>
               
                <div class="card">
                    <i class="bi bi-calendar-week"></i>
                    <p>15 To End</p>
                    <span class="count_no">{{content.empsalc_15to}}</span>
                    <span>{{content.empsal_15to}} /-</span>
                </div>
                
                
            </div>

        </div>
        
        
    </div>



    
<script>
    const counters = document.querySelectorAll('.value');
    const speed = 400;
    
    counters.forEach( counter => {
       const animate = () => {
          const value = +counter.getAttribute('akhi');
          const data = +counter.innerText;
         
          const time = value / speed;
         if(data < value) {
              counter.innerText = Math.ceil(data + time);
              setTimeout(animate, 1);
            }else{
              counter.innerText = value;
            }
         
       }
       
       animate();
    });
</script>



</main>