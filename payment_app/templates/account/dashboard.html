{% extends 'account/account_base.html' %}
{% load static %}
{% block body %}

<style>
    #action-box
    {
        background:var( --white-color);
        display: flex;
        align-items: center;
        justify-content: center;
        flex-wrap: wrap;
        gap: 1em;
        height: 30vh;
    }
    #action-box .card
    {
        height: 130px;
        width: 270px;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: rgba(149, 157, 165, 0.2) 0px 8px 24px;
        border: none;
        margin: none;
        border-radius: 5px;
        cursor: pointer;
    }
    #action-box .card:hover{
        box-shadow: rgba(100, 100, 111, 0.2) 0px 7px 29px 0px;
        transition: 0.5s;
    }
    #action-box .card h5{
        margin-top: 0.40em;
        margin-bottom: 0.80em;
        color:rgb(21, 74, 139);
        font-weight: 600;
        font-size: 1.2em;
    }
</style>
<main>
<!--Container Main start-->
<div class="height-100 container-fluid" id="action-box">
<a href="{% url 'Register_form' %}">
    <div class="card">
        <i class='bi bi-people-fill nav_icon'></i><h5>Register</h5>
    </div>
</a>
<a href="{% url 'pyment_form' %}">
    <div class="card">
        <i class="bi bi-currency-rupee"></i><h5>Add Payments</h5>
    </div>
</a>
<a href="{% url 'pyments_history' %}">
    <div class="card">
        <i class="bi bi-database-fill-add"></i><h5>Payments History</h5>
    </div>
</a>
<a href="{% url 'department_form' %}">
    <div class="card">
        <i class="bi bi-box-fill"></i><h5>Department</h5>
    </div>
</a>
</div>
<!--Container Main end-->



<!-- Register-list Style -->

    <style>
        #register-list 
        {
            padding: 1em 0.50em;
        }
        #register-list .message-bx
        {
            background: #81e372;
            padding: 0.10em 0.50em;
            margin: 0 auto;
            margin-bottom: 0.30em;
            border-radius: 5px;
            text-align: start;
            width: 20%;
           
        }
        #register-list .message-bx p{
            font-size: 0.99em;
            color: #fff;
            font-weight: 800;
           margin-top: 0.30em;
           text-align: center;
        }
        #register-list h5{
            font-weight: 700;
            font-size: 1.4em;
            margin: 0.70em 0em;
        }
        #register-list .card
        {
            padding: 0.80em 1em;
            box-shadow: rgba(149, 157, 165, 0.2) 0px 8px 24px;
            border: none;

        }
        #register-details tbody td
        {
            font-size: 0.90em;
        }
        #register-details .danger
        {
            background: #e54c26;
            color:#fff;
            font-weight: 600;
        }
        #register-details .dangermsg
        {
            
            color: #e54c26;
            font-weight: 700;
        }
        #register-details .success
        {
            background: #2cdb11;
            color:#fff;
            font-weight: 600;
        }
        #register-details .successmsg
        {
            background: #2cdb11;
            color:#ffffff;
            font-weight: 700;
        }
        
        #register-details .warning
        {
            background:#fceb2e;
            color:#fff;
            font-weight: 600;
        }
        #register-details .warningmsg
        {
            color:#ffe02e;;
            font-weight: 700;
        }
        #register-details .edit
        {
            padding-left: 0.50em;
            margin-right: 0em;
            cursor: pointer;
        }
        .progress-bar-start
        {
            background: #1031a8;
        }
        .progress-bar-warning
        {
            background: #fceb2e;
        }
        .progress-bar-success
        {
            background: #27a814;
        }
        .actiontd
        {
            text-align: center;
            
        }
        #register-details .complete
        {
            background: #0c1846;
            color: #fff;
            padding: 0.50em 1em;
            font-weight: 600;
            letter-spacing: 0.05em;
           
        }
        #register-details .completed
        {
            color: #37be19;
            font-weight: 800;
        }
      
        
    </style>

<!-- Register-list Style -->

<!--Container List Show-->
<div class="container-fluid" id="register-list">
    <h5> Payments List </h5>
    <div class="card">
       
        {% if msg == 1 %}
            <div class="message-bx" id="msgbox">
                <p><i class="bi bi-check"></i>Payments All Completed </p>
            </div>
        {% endif %}
        <table id="register-details" class="display" >
            <thead>
                <tr>
                    <th></th>
                    <th>Full Name</th>
                    <th>Message</th>
                    <th>Date Of Joing</th>
                    <th>Department</th>
                    <th>BAL Amount</th>
                    <th>TL Amount</th>
                    <th> Pay Progress</th>
                    <th>Action</th>

                </tr>
            </thead>
            <tbody>
                {% for i in reg %}
                <tr>
                    <td>
                        {{ forloop.counter }}
                       
                      <a href="{% url 'singleuser_details' i.id %}" class="edit"><i class="bi bi-pen-fill"></i></a> 
                        <!-- <a href="{% url 'remove' i.id %}" class="notcheck"><i class="bi bi-x-circle-fill"></i></a> -->
                    </td>
                    {% if cur_date < i.next_pay_date %}
                    <td>
                        {{i.fullName}}
                    </td>
                    <td class="successmsg">
                        <span >Next Payment On {{ i.next_pay_date}} </span>
                    </td>
                    {% elif cur_date > i.next_pay_date %}
                    <td class="danger">
                       {{i.fullName}}   
                    </td>
                    <td>
                        <span class="dangermsg"><i class="bi bi-exclamation-triangle-fill"></i> Payment Date Exceed</span>
                    </td>
                    {% else %}
                    <td class="warning">
                        {{i.fullName}}
                    </td>
                    <td>
                        <span class="warningmsg"><i class="bi bi-exclamation-triangle-fill"></i> Last Date For Payment</span>
                    </td>
                    {% endif %}
                    <td>{{i.dofj}}</td>
                
                    <td>{{i.dept_id.department}}</td>
                    {% if i.payprogress <= 10 %}
                    <td class="danger">{{i.regbalance_amt}}</td>
                    {% elif  i.payprogress > 10 and i.payprogress <= 89  %}
                    <td class="warning">{{i.regbalance_amt}}</td>
                    {% else %}
                    <td class="success">{{i.regbalance_amt}}</td>
                    {% endif %}
                    <td>{{i.regtotal_amt}}</td>
                    <td>
                       {% if i.payprogress <= 10 %}
                            <div class="progress">
                                <div class="progress-bar progress-bar-start" 
                                role="progressbar" style="width: {{i.payprogress}}%;" 
                                aria-valuenow="{{i.payprogress}}" aria-valuemin="0" aria-valuemax="100"> {{i.payprogress}}%

                                </div>
                            </div>
                        {% elif  i.payprogress > 10 and i.payprogress <= 89  %}
                            <div class="progress">
                                <div class="progress-bar progress-bar-warning" 
                                role="progressbar" style="width: {{i.payprogress}}%;" 
                                aria-valuenow="{{i.payprogress}}" aria-valuemin="0" aria-valuemax="100"> {{i.payprogress}}%

                                </div>
                            </div>
                        {% else %}
                            <div class="progress">
                                <div class="progress-bar progress-bar-success" 
                                role="progressbar" style="width: {{i.payprogress}}%;" 
                                aria-valuenow="{{i.payprogress}}" aria-valuemin="0" aria-valuemax="100"> {{i.payprogress}}%

                                </div>
                            </div>
                        {% endif %}
                       
                    </td>
                    <td class="actiontd">
                        {% if i.payprogress == 100 and i.payment_status == 0 %}
                        <a href="{% url 'payment_completed' i.id %}" class="complete">Complete</a>
                        {% elif i.payprogress == 100 and i.payment_status == 1 %}
                        <span class="completed"><i class="bi bi-check-circle-fill px-1"></i> Completed</span>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
              
            </tbody>
           
        </table>

    </div>
</div>

</main>

{% endblock %}